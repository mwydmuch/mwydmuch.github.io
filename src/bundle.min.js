/*!
 * mwydmuch.pl v0.0.4
 * Copyright 2021 Marek Wydmuch
 */

!function s(h,r,a){function n(e,t){if(!r[e]){if(!h[e]){var i="function"==typeof require&&require;if(!t&&i)return i(e,!0);if(o)return o(e,!0);throw new Error("Cannot find module '"+e+"'")}i=r[e]={exports:{}};h[e][0].call(i.exports,function(t){var i=h[e][1][t];return n(i||t)},i,i.exports,s,h,r,a)}return r[e].exports}for(var o="function"==typeof require&&require,t=0;t<a.length;t++)n(a[t]);return n}({1:[function(t,i,e){"use strict";class s extends t("./animation"){constructor(t,i,e=30,s=8,h=-20){super(t,i),this.length=e,this.evenAngel=s*Math.PI/180,this.oddAngel=h*Math.PI/180,this.seqences=[],this.frame=0,this.startX,this.startY,this.resize()}getName(){return"3n + 1 visualization"}update(t){let i=this.seqences.length+1,e=[i];for(;1!=i;)i%2?i=3*i+1:i/=2,e.push(i);this.seqences.push(e)}drawSequence(i){let e=this.startX,s=this.startY,h=270*Math.PI/180;this.ctx.strokeStyle=this.colors[this.frame%this.colors.length],this.ctx.lineWidth=2;for(let t=i.length-2;0<=t;--t)this.ctx.beginPath(),this.ctx.moveTo(e,s),i[t]%2?h+=this.oddAngel:h+=this.evenAngel,e+=this.length*Math.cos(h),s+=this.length*Math.sin(h),this.ctx.lineTo(e,s),this.ctx.stroke()}draw(){for(;this.frame<this.seqences.length;)this.drawSequence(this.seqences[this.frame]),++this.frame}resize(){this.startX=this.ctx.canvas.width/2,this.startY=this.ctx.canvas.height,this.frame=0,this.ctx.fillStyle="#FFFFFF",this.ctx.fillRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height)}}i.exports=s},{"./animation":2}],2:[function(t,i,e){"use strict";i.exports=class{constructor(t,i){this.ctx=t.getContext("2d",{alpha:!1}),this.colors=i}getFPS(){return 25}getName(){return"unamed animation"}}},{}],3:[function(t,i,e){"use strict";class s extends t("./animation"){constructor(t,i,e=10){super(t,i),this.cellSize=e,this.gridWidth=0,this.gridHeight=0,this.grid=null,this.gridNextState=null,this.resize()}getName(){return"Conway's Game of Life"}getCord(t,i){return t+i*this.gridWidth}isAlive(t,i){return!(t<0||t>=this.gridWidth||i<0||i>=this.gridHeight)&&(1==this.grid[this.getCord(t,i)]?1:0)}update(t){for(let i=0;i<this.gridHeight;++i)for(let t=0;t<this.gridWidth;++t){var e=this.isAlive(t-1,i-1)+this.isAlive(t,i-1)+this.isAlive(t+1,i-1)+this.isAlive(t-1,i)+this.isAlive(t+1,i)+this.isAlive(t-1,i+1)+this.isAlive(t,i+1)+this.isAlive(t+1,i+1),s=this.getCord(t,i);2==e&&1==this.grid[s]?this.gridNextState[s]=this.grid[s]:this.gridNextState[s]=3==e?1:this.grid[s]-1}[this.grid,this.gridNextState]=[this.gridNextState,this.grid]}draw(){this.ctx.fillStyle="#FFFFFF",this.ctx.fillRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height);for(let s=0;s<this.gridHeight;++s)for(let e=0;e<this.gridWidth;++e){var h=this.grid[this.getCord(e,s)];let t=1,i=null;0<=h?i=this.colors[0]:-2<=h?(i=this.colors[1],t+=1):-4<=h?(i=this.colors[2],t+=2):-16<=h&&(i=this.colors[3],t+=3),i&&(this.ctx.fillStyle=i,this.ctx.fillRect(e*this.cellSize+t,s*this.cellSize+t,this.cellSize-2*t,this.cellSize-2*t))}}resize(){var e=Math.ceil(this.ctx.canvas.width/this.cellSize),t=Math.ceil(this.ctx.canvas.height/this.cellSize);let s=new Array(e*t);for(let i=0;i<t;i++)for(let t=0;t<e;t++){var h=t+i*e;t<this.gridWidth&&i<this.gridHeight?s[h]=this.grid[this.getCord(t,i)]:s[h]=.5<Math.random()?1:0}this.grid=s,this.gridNextState=[...this.grid],this.gridWidth=e,this.gridHeight=t}}i.exports=s},{"./animation":2}],4:[function(t,i,e){"use strict";var s=t("./game-of-live"),h=t("./perlin-noise-particles"),r=t("./spinning-shapes"),a=t("./neural-network"),t=t("./3n+1");const n=document.getElementById("background"),o=document.getElementById("container");var c=0,l=0,d=!1;const g=["#54ABA4","#639598","#678786","#92ABA1","#A5BFBC"],u=document.getElementById("content"),f=document.getElementById("background-controls"),x=document.getElementById("background-name"),m=document.getElementById("background-prev"),v=document.getElementById("background-next"),p=[s,h,r,a,t];let w=Math.floor(Math.random()*p.length),M=new p[w](n,g);var y=0,F=0;function S(t){var i=t.getFPS();y=1e3/i,F=Date.now(),x.innerHTML=t.getName()}S(M),function t(){requestAnimationFrame(t);var i,e=Date.now(),s=e-F;s<y||(F=e,i=Math.max(o.offsetWidth,window.innerWidth),e=Math.max(o.offsetHeight,window.innerHeight),i!=c||e!=l?d=!0:d&&(n.width=i,n.height=e,M.resize(),d=!1),l=e,c=i,M.update(s),M.draw())}(),f.addEventListener("mouseover",function(){u.classList.remove("show-from-0"),u.classList.add("fade-to-0"),n.classList.remove("faded-8"),n.classList.remove("fade-to-8"),n.classList.add("hue-change"),n.classList.add("show-from-8")}),f.addEventListener("mouseout",function(){u.classList.remove("fade-to-0"),u.classList.add("show-from-0"),n.classList.remove("show-from-8"),n.classList.add("fade-to-8"),n.classList.remove("hue-change")}),m.addEventListener("click",function(){w=(w+p.length-1)%p.length,M=new p[w](n,g),S(M)}),v.addEventListener("click",function(){w=(w+1)%p.length,M=new p[w](n,g),S(M)})},{"./3n+1":1,"./game-of-live":3,"./neural-network":5,"./perlin-noise-particles":6,"./spinning-shapes":8}],5:[function(t,i,e){"use strict";var s=t("./animation");const l=t("./utils");class h extends s{constructor(t,i){super(t,i),this.network=[],this.nLayers=0,this.resize(),this.baseNodeSize=3,this.baseLineSize=1}getFPS(){return 2}getName(){return"visualization of simple neural network"}update(t){if(0!=this.network.length){for(var i of this.network[0])i.v=l.randomRange(-1,1);for(let i=1;i<this.nLayers;i++)for(var e of this.network[i]){for(let t=e.v=0;t<this.network[i-1].length;++t)e.v+=this.network[i-1][t].v*e.w[t];i==this.nLayers-1?e.v=1/(1+Math.exp(-e.v)):e.v=Math.max(0,e.v)}}}draw(){if(l.clear(this.ctx,"#FFFFFF"),null!=this.stateData)return this.ctx.globalAlpha=1-this.time/this.stateTime,null!=this.prevStateData&&this.ctx.putImageData(this.prevStateData,0,0),this.ctx.globalAlpha=this.time/this.stateTime,void this.ctx.putImageData(this.stateData,0,0);for(let t=0;t<this.nLayers-1;t++){var i,e=this.network[t],s=this.network[t+1];for(i of e)for(var h of s){var r=l.clip(i.v,0,1),a=this.colors[this.colors.length-1-Math.floor(r*this.colors.length)];this.ctx.globalAlpha=r,this.ctx.lineWidth=1+r,this.ctx.strokeStyle=a,this.ctx.beginPath(),this.ctx.moveTo(i.x,i.y),this.ctx.lineTo(h.x,h.y),this.ctx.stroke()}}this.ctx.globalAlpha=1;for(var t of this.network)for(var n of t){var o=l.clip(n.v,0,1),c=l.clip(2*n.v,0,4),o=this.colors[this.colors.length-1-Math.floor(o*this.colors.length)],c=this.baseNodeSize+c;l.fillCircle(this.ctx,o,n.x,n.y,c),this.ctx.font="12px sans-serif",this.ctx.fillText(n.v.toFixed(2),n.x-11,n.y-2*this.baseNodeSize)}}resize(){l.clear(this.ctx,"#FFFFFF"),this.network=[],this.nLayers=5;let r=150;var t=this.ctx.canvas.width,a=this.ctx.canvas.height,n=t/this.nLayers,o=a/17;for(let h=0;h<this.nLayers;h++){let i=[],e=0;e=0==h||h==this.nLayers-1?Math.floor(l.randomRange(4,16)):l.randomChoice([8,12,16]);let s=a/2-Math.floor(e/2)*o;e%2==0&&(s+=o/2);for(let t=0;t<e;t++){let t={x:r,y:s,v:0,w:null};0<h&&(t.w=l.randomArray(this.network[h-1].length,-1,1)),i.push(t),s+=o}this.network.push(i),r+=n}}}i.exports=h},{"./animation":2,"./utils":9}],6:[function(t,i,e){"use strict";var s=t("./animation");const h=t("./perlin-noise"),r=t("./utils");class a extends s{constructor(t,i,e=4,s=1200){super(t,i),this.particlePer100PixSq=e,this.noiseScale=s,this.noise=new h,this.width=0,this.height=0,this.particles=[],this.imageData=null,this.resize()}getFPS(){return 25}getName(){return"particles moving through Perlin noise"}update(t){for(var i of this.particles){var e=2*this.noise.get(i.x/this.noiseScale,i.y/this.noiseScale)*Math.PI*this.noiseScale;i.x+=Math.cos(e)*i.speed,i.y+=Math.sin(e)*i.speed}}draw(){for(var t of this.particles)r.fillCircle(this.ctx,t.color,t.x,t.y,t.radius);this.imageData=this.ctx.getImageData(0,0,this.ctx.canvas.width,this.ctx.canvas.height)}spawnParticles(i,e,s,h){var r=s/100*h/100*this.particlePer100PixSq;for(let t=0;t<r;t++)this.particles.push({x:Math.random()*s+i,y:Math.random()*h+e,speed:.15*Math.random()+.1,radius:.5*Math.random()+.5,color:this.colors[Math.floor(Math.random()*this.colors.length)]})}resize(){r.clear(this.ctx,"#FFFFFF"),null!=this.imageData&&this.ctx.putImageData(this.imageData,0,0);var t=this.ctx.canvas.width-this.width,i=this.ctx.canvas.height-this.height;0<t&&this.spawnParticles(this.width,0,t,this.height),0<i&&this.spawnParticles(0,this.height,this.width,i),(0<t||0<i)&&this.spawnParticles(this.width,this.height,t,i),this.width=Math.max(this.ctx.canvas.width,this.width),this.height=Math.max(this.ctx.canvas.height,this.height)}}i.exports=a},{"./animation":2,"./perlin-noise":7,"./utils":9}],7:[function(t,i,e){"use strict";i.exports=class{constructor(){this.noiseGradients={},this.noiseMemory={}}dotNoiseGrid(t,i,e,s){t={x:t-e,y:i-s};let h;return this.noiseGradients[[e,s]]?h=this.noiseGradients[[e,s]]:(i=2*Math.random()*Math.PI,h={x:Math.cos(i),y:Math.sin(i)},this.noiseGradients[[e,s]]=h),t.x*h.x+t.y*h.y}interpolate(t,i,e){return i+(6*t**5-15*t**4+10*t**3)*(e-i)}get(t,i){if(this.noiseMemory.hasOwnProperty([t,i]))return this.noiseMemory[[t,i]];var e=Math.floor(t),s=Math.floor(i),h=this.dotNoiseGrid(t,i,e,s),r=this.dotNoiseGrid(t,i,e+1,s),a=this.dotNoiseGrid(t,i,e,s+1),n=this.dotNoiseGrid(t,i,e+1,s+1),r=this.interpolate(t-e,h,r),n=this.interpolate(t-e,a,n),n=this.interpolate(i-s,r,n);return this.noiseMemory[[t,i]]=n}}},{}],8:[function(t,i,e){"use strict";class s extends t("./animation"){constructor(t,i,e=500){super(t,i),this.shapes=e,this.time=0,this.scale=0,this.centerX=0,this.centerY=0,this.dist_base=.6,this.dist_var=.2,this.size_base=.2,this.size_var=.12,this.resize()}getName(){return"circles moving in a circle"}update(t){this.time+=t/1e3}getCenterForTheta(t,i,e){e=(this.dist_base+this.dist_var*Math.cos(6*t+Math.cos(8*t+i/2)))*e;return{x:Math.cos(t)*e,y:Math.sin(t)*e}}getSizeForTheta(t,i,e){return(this.size_base+this.size_var*Math.cos(9*t-i))*e}getColorForTheta(t,i){return this.colors[Math.floor((Math.cos(9*t-i)+1)/2*this.colors.length)]}draw(){this.ctx.fillStyle="#FFFFFF",this.ctx.fillRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height);for(let t=0;t<this.shapes;++t){var i=t/this.shapes*2*Math.PI,e=this.getCenterForTheta(i,this.time,this.scale),s=this.getSizeForTheta(i,this.time,this.scale);this.ctx.strokeStyle=this.getColorForTheta(i,this.time),this.ctx.lineWidth=1,this.ctx.beginPath(),this.ctx.arc(e.x+this.centerX,e.y+this.centerY,s,0,2*Math.PI,!1),this.ctx.stroke()}}resize(){this.centerX=this.ctx.canvas.width/2,this.centerY=this.ctx.canvas.height/2,this.scale=Math.max(this.ctx.canvas.width,this.ctx.canvas.height)/3}}i.exports=s},{"./animation":2}],9:[function(t,i,e){i.exports={randomRange:function(t,i){return Math.random()*(i-t)+t},randomChoice:function(t){return t[Math.floor(Math.random()*t.length)]},randomBoxMuller:function(){return Math.sqrt(-2*Math.log(1-Math.random()))*Math.cos(2*Math.PI*Math.random())},randomArray:function(t,i,e){return Array(t).fill().map(()=>this.randomRange(i,e))},clip:function(t,i,e){return Math.max(i,Math.min(e,t))},lerp:function(t,i,e){return(1-e)*t+e*i},clear(t,i){t.fillStyle=i,t.fillRect(0,0,t.canvas.width,t.canvas.height)},fillRect(t,i,e,s,h,r){},fillCircle(t,i,e,s,h){t.fillStyle=i,t.beginPath(),t.arc(e,s,h,0,2*Math.PI,!1),t.fill()},strokeCircle(t,i,e,s,h){t.strokeStyle=i,t.beginPath(),t.arc(e,s,h,0,2*Math.PI,!1),t.stroke()}}},{}]},{},[4]);